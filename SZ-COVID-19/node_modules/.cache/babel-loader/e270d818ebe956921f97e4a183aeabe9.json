{"remainingRequest":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/babel-loader/lib/index.js!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/ranking/components/sankey.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/ranking/components/sankey.vue","mtime":1617781942000},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/babel-loader/lib/index.js","mtime":1617788517170},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js","mtime":1617788568833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUveXVqaWFoYW8vRG93bmxvYWRzL3Zpc3VhbF93b3JrL1NaLUNPVklELTE5L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IGVjaGFydHMgZnJvbSAnZWNoYXJ0cy9saWIvZWNoYXJ0cyc7CmltcG9ydCAnZWNoYXJ0cy9saWIvY2hhcnQvc2Fua2V5JzsKaW1wb3J0IFRyYWNrSlNPTiBmcm9tICdAL2RhdGEvdHJhY2snOyAvLyBpbXBvcnQgeyBzY2FsZUxpbmVhciB9IGZyb20gJ2QzJwoKdmFyIERJTSA9IFsnYWdlX3JhbmdlJywgJ3hiJywgJ3BlcmlvZCcsICdvcmlnaW4nLCAndHJhbiddOwp2YXIgSVRFTV9TVFlMRSA9IHsKICB4YjogZnVuY3Rpb24geGIoKSB7CiAgICByZXR1cm4gewogICAgICAn55S3JzogewogICAgICAgIGNvbG9yOiAnIzNhN2JhNScKICAgICAgfSwKICAgICAgJ+Wlsyc6IHsKICAgICAgICBjb2xvcjogJyM5ZDRkYTcnCiAgICAgIH0KICAgIH07CiAgfQp9Owp2YXIgVFJBTl9PUkRFUiA9IHsKICAn56eB5a62L+S4k+i9pic6IDAsCiAgJ+WHuuenn+i9pic6IDEsCiAgJzNBMTA56Iiq6Ii5JzogMiwKICAn5rex5Zyz5rm+5Y+j5bK4JzogMywKICAn6Iiq56m6JzogNCwKICAn5LiN5piOJzogNQp9Owp2YXIgU09SVF9GVU4gPSB7CiAgJ2FnZV9yYW5nZSc6IGZ1bmN0aW9uIGFnZV9yYW5nZShkYXRhKSB7CiAgICByZXR1cm4gXy5vcmRlckJ5KGRhdGEsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHN3aXRjaCAoZC5uYW1lKSB7CiAgICAgICAgY2FzZSAn5am05bm85YS/L+mdkuWwkeW5tCgwfjE1KSc6CiAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgY2FzZSAn6Z2S5bm0KDE2fjMwKSc6CiAgICAgICAgICByZXR1cm4gMTsKCiAgICAgICAgY2FzZSAn5Lit6Z2S5bm0KDMwfjQ1KSc6CiAgICAgICAgICByZXR1cm4gMjsKCiAgICAgICAgY2FzZSAn5Lit5bm0KDQ1fjYwKSc6CiAgICAgICAgICByZXR1cm4gMzsKCiAgICAgICAgY2FzZSAn6ICB5bm0KD42MCknOgogICAgICAgICAgcmV0dXJuIDQ7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgJ29yaWdpbic6IGZ1bmN0aW9uIG9yaWdpbihkYXRhKSB7CiAgICByZXR1cm4gZGF0YS5zb3J0KGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiBDT1VOVFJZLmluZGV4T2YoYS5uYW1lKSAhPT0gLTEgPyAxIDogLTE7CiAgICB9KTsKICB9LAogICd0cmFuJzogZnVuY3Rpb24gdHJhbihkYXRhKSB7CiAgICByZXR1cm4gXy5vcmRlckJ5KGRhdGEsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBUUkFOX09SREVSW2QubmFtZV07CiAgICB9KTsKICB9LAogICdwZXJpb2QnOiBmdW5jdGlvbiBwZXJpb2QoZGF0YSkgewogICAgcmV0dXJuIF8ub3JkZXJCeShkYXRhLCBmdW5jdGlvbiAoZCkgewogICAgICBzd2l0Y2ggKGQubmFtZSkgewogICAgICAgIGNhc2UgJ+eWq+aDheWIneacnyh+MS8yMyknOgogICAgICAgICAgcmV0dXJuIDA7CgogICAgICAgIGNhc2UgJ+WPkeWxleacnygxLzIzfjIvNiknOgogICAgICAgICAgcmV0dXJuIDE7CgogICAgICAgIGNhc2UgJ+WbveWGheS6jOasoeS8oOaSreacnygyLzZ+Mi8yMCknOgogICAgICAgICAgcmV0dXJuIDI7CgogICAgICAgIGNhc2UgJ+WbveWklui+k+WFpeacnygyLzIwfiknOgogICAgICAgICAgcmV0dXJuIDM7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKdmFyIENPVU5UUlkgPSBbIuW3tOilvyIsICLms5Xlm70iLCAi5p+s5Z+U5a+oIiwgIua+s+mXqCIsICLojbflhbAiLCAi6I+y5b6L5a6+IiwgIuS/hOe9l+aWryIsICLmlrDliqDlnaEiLCAi6KW/54+t54mZIiwgIueRnuWjqyIsICLms7Dlm70iLCAi6Iux5Zu9IiwgIue+juWbvSJdOwoKdmFyIGdldEFnZUNhdGVnb3J5ID0gZnVuY3Rpb24gZ2V0QWdlQ2F0ZWdvcnkoYWdlKSB7CiAgaWYgKGFnZSA+PSAwICYmIGFnZSA8PSAxNSkgewogICAgcmV0dXJuICflqbTlubzlhL8v6Z2S5bCR5bm0KDB+MTUpJzsKICB9CgogIGlmIChhZ2UgPiAxNSAmJiBhZ2UgPD0gMzApIHsKICAgIHJldHVybiAn6Z2S5bm0KDE2fjMwKSc7CiAgfQoKICBpZiAoYWdlID4gMzAgJiYgYWdlIDw9IDQ1KSB7CiAgICByZXR1cm4gJ+S4remdkuW5tCgzMH40NSknOwogIH0KCiAgaWYgKGFnZSA+IDQ1ICYmIGFnZSA8PSA2MCkgewogICAgcmV0dXJuICfkuK3lubQoNDV+NjApJzsKICB9CgogIGlmIChhZ2UgPiA2MCkgewogICAgcmV0dXJuICfogIHlubQoPjYwKSc7CiAgfQp9OwoKdmFyIENoaW5hUGVyaW9kID0gWycyMDIwLzEvMjMnLCAnMjAyMC8yLzYnLCAnMjAyMC8yLzIwJ10ubWFwKGZ1bmN0aW9uIChkKSB7CiAgcmV0dXJuIG5ldyBEYXRlKGQpLmdldFRpbWUoKTsKfSk7Cgp2YXIgZ2V0UGVyaW9kID0gZnVuY3Rpb24gZ2V0UGVyaW9kKGRhdGUpIHsKICB2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKGRhdGUpLmdldFRpbWUoKTsKCiAgaWYgKG5ld0RhdGUgPD0gQ2hpbmFQZXJpb2RbMF0pIHsKICAgIHJldHVybiAn55ar5oOF5Yid5pyfKH4xLzIzKSc7CiAgfQoKICBpZiAobmV3RGF0ZSA+IENoaW5hUGVyaW9kWzBdICYmIG5ld0RhdGUgPCBDaGluYVBlcmlvZFsxXSkgewogICAgcmV0dXJuICflj5HlsZXmnJ8oMS8yM34yLzYpJzsKICB9CgogIGlmIChuZXdEYXRlID4gQ2hpbmFQZXJpb2RbMV0gJiYgbmV3RGF0ZSA8IENoaW5hUGVyaW9kWzJdKSB7CiAgICByZXR1cm4gJ+WbveWGheS6jOasoeS8oOaSreacnygyLzZ+Mi8yMCknOwogIH0KCiAgaWYgKG5ld0RhdGUgPj0gQ2hpbmFQZXJpb2RbMl0pIHsKICAgIHJldHVybiAn5Zu95aSW6L6T5YWl5pyfKDIvMjB+KSc7CiAgfQp9OyAvLyBjb25zdCBzY2FsZSA9IHNjYWxlTGluZWFyKCkKLy8gICAgIC5kb21haW4oWzEsIDIwMF0pCi8vICAgICAucmFuZ2UoWycjODdjYzdjJywgJyM5NjZkNGInLCcjOTM1NzQwJywgJyM2OTI3N2UnLCAnIzlkNGRhNyddKQoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2FuS2V5JywKICBtZXRob2RzOiB7CiAgICBnZXROb2RlczogZnVuY3Rpb24gZ2V0Tm9kZXMoZGF0YSkgewogICAgICByZXR1cm4gRElNLnJlZHVjZShmdW5jdGlvbiAoYXJyLCBrZXkpIHsKICAgICAgICB2YXIgc3R5bGVzID0gSVRFTV9TVFlMRVtrZXldICYmIElURU1fU1RZTEVba2V5XSgpIHx8IHt9OwoKICAgICAgICB2YXIgdGVtcEFyciA9IF8uY2hhaW4oZGF0YSkubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBuYW1lOiBkW2tleV0sCiAgICAgICAgICAgIGl0ZW1TdHlsZTogc3R5bGVzW2Rba2V5XV0KICAgICAgICAgIH07CiAgICAgICAgfSkudW5pcUJ5KCduYW1lJykudmFsdWUoKTsKCiAgICAgICAgdGVtcEFyciA9IFNPUlRfRlVOW2tleV0gPyBTT1JUX0ZVTltrZXldKHRlbXBBcnIpIDogdGVtcEFycjsKICAgICAgICByZXR1cm4gYXJyLmNvbmNhdCh0ZW1wQXJyKTsKICAgICAgfSwgW10pOwogICAgfSwKICAgIGdldExpbmtzOiBmdW5jdGlvbiBnZXRMaW5rcyhkYXRhKSB7CiAgICAgIHZhciBsaW5rcyA9IFtdOwogICAgICBESU0uZm9yRWFjaChmdW5jdGlvbiAoZCwgaSwgYXJyKSB7CiAgICAgICAgaWYgKGkgPT09IGFyci5sZW5ndGggLSAxKSByZXR1cm47CiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkMSkgewogICAgICAgICAgdmFyIHNvdXJjZSA9IGQxW2RdOwogICAgICAgICAgdmFyIHRhcmdldCA9IGQxW2FycltpICsgMV1dOwogICAgICAgICAgdmFyIHZhbHVlID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGQyKSB7CiAgICAgICAgICAgIHJldHVybiBkMltkXSA9PT0gc291cmNlICYmIGQyW2FycltpICsgMV1dID09PSB0YXJnZXQ7CiAgICAgICAgICB9KS5sZW5ndGg7CiAgICAgICAgICBsaW5rcy5wdXNoKHsKICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsCiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LAogICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgIGxpbmVTdHlsZTogey8vIGNvbG9yOiBzY2FsZSh2YWx1ZSksCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIF8udW5pcVdpdGgobGlua3MsIF8uaXNFcXVhbCk7CiAgICB9LAogICAgaW5pdERhdGE6IGZ1bmN0aW9uIGluaXREYXRhKCkgewogICAgICB2YXIgZGF0YSA9IF8uY2hhaW4oVHJhY2tKU09OKSAvLyAuc2xpY2UoMCwgNDAwKQogICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQudHJhY2subGVuZ3RoOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICB2YXIgdHJhY2sgPSBkLnRyYWNrLAogICAgICAgICAgICBubCA9IGQubmw7CiAgICAgICAgdmFyIHRyYW4gPSB0cmFjay5sZW5ndGggPyB0cmFja1t0cmFjay5sZW5ndGggLSAxXS50cmFuIDogJyc7CiAgICAgICAgdHJhbiA9IHRyYW4uaW5kZXhPZign6Iiq54+tJykgIT09IC0xID8gJ+iIquepuicgOiB0cmFuOwogICAgICAgIHRyYW4gPSAvKOengeWutil8KOiHqumpvil8KOS4k+i9pil8KOWVhuWKoei9pikvLnRlc3QodHJhbikgPyAn56eB5a62L+S4k+i9picgOiB0cmFuOwogICAgICAgIHRyYW4gPSAvKOeahOWjqyl8KOWHuuenn+i9pikvLnRlc3QodHJhbikgPyAn5Ye656ef6L2mJyA6IHRyYW47CiAgICAgICAgdmFyIGFnZV9yYW5nZSA9IGdldEFnZUNhdGVnb3J5KCtubCk7CiAgICAgICAgcmV0dXJuIF8ucGljayhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGQpLCB7fSwgewogICAgICAgICAgdHJhbjogdHJhbiB8fCAn5LiN5piOJywKICAgICAgICAgIGFnZV9yYW5nZTogYWdlX3JhbmdlLAogICAgICAgICAgcGVyaW9kOiBnZXRQZXJpb2QoZC50cmFja1tkLnRyYWNrLmxlbmd0aCAtIDFdLnRpbWUpCiAgICAgICAgfSksIERJTSk7CiAgICAgIH0pLnZhbHVlKCk7CgogICAgICB2YXIgbm9kZXMgPSB0aGlzLmdldE5vZGVzKGRhdGEpOwogICAgICB2YXIgbGlua3MgPSB0aGlzLmdldExpbmtzKGRhdGEpOwogICAgICByZXR1cm4gewogICAgICAgIG5vZGVzOiBub2RlcywKICAgICAgICBsaW5rczogbGlua3MKICAgICAgfTsKICAgIH0sCiAgICBpbml0Q2hhcnQ6IGZ1bmN0aW9uIGluaXRDaGFydCgpIHsKICAgICAgdmFyIF90aGlzJGluaXREYXRhID0gdGhpcy5pbml0RGF0YSgpLAogICAgICAgICAgbm9kZXMgPSBfdGhpcyRpbml0RGF0YS5ub2RlcywKICAgICAgICAgIGxpbmtzID0gX3RoaXMkaW5pdERhdGEubGlua3M7CgogICAgICB2YXIgb3B0aW9uID0gewogICAgICAgIGNvbG9yOiBbJyM4N2NjN2MnLCAnIzk2NmQ0YicsICcjOTM1NzQwJywgJyM2OTI3N2UnLCAnIzlkNGRhNyddLAogICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgIHRyaWdnZXI6ICJpdGVtIiwKICAgICAgICAgIHRyaWdnZXJPbjogIm1vdXNlbW92ZSIKICAgICAgICB9LAogICAgICAgIHNlcmllczogewogICAgICAgICAgdHlwZTogInNhbmtleSIsCiAgICAgICAgICBsZWZ0OiAxMCwKICAgICAgICAgIHJpZ2h0OiA1MCwKICAgICAgICAgIG5vZGVHYXA6IDEsCiAgICAgICAgICBsYXlvdXRJdGVyYXRpb25zOiAwLAogICAgICAgICAgZGF0YTogbm9kZXMsCiAgICAgICAgICAvLyDoioLngrkKICAgICAgICAgIGxpbmtzOiBsaW5rcywKICAgICAgICAgIC8vIOiKgueCueS5i+mXtOeahOi/nue6vwogICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSwKICAgICAgICAgIGZvY3VzTm9kZUFkamFjZW5jeTogImFsbEVkZ2VzIiwKICAgICAgICAgIC8vIOm8oOagh+WIkuS4iuaXtumrmOS6rueahOiKgueCueWSjOi/nue6v++8jGFsbEVkZ2Vz6KGo56S66byg5qCH5YiS5Yiw6IqC54K55LiK54K55Lqu6IqC54K55LiK55qE6L+e57q/5Y+K6L+e57q/5a+55bqU55qE6IqC54K5CiAgICAgICAgICBsYWJlbDogewogICAgICAgICAgICBmb250U2l6ZTogMTAsCiAgICAgICAgICAgIGNvbG9yOiAicmdiYSgyNTUsMjU1LDI1NSwuOCkiCiAgICAgICAgICB9LAogICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgIGNvbG9yOiAnc291cmNlJywKICAgICAgICAgICAgY3VydmVuZXNzOiAwLjUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYW5rZXknKSwgJ2xpZ2h0Jyk7CiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgc2V0VGltZW91dCh0aGlzLmluaXRDaGFydCk7CiAgfQp9Ow=="},{"version":3,"sources":["sankey.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div id=\"sankey\">\n\n    </div>\n</template>\n\n<script>\n    import _ from 'lodash'\n    import echarts from 'echarts/lib/echarts';\n    import 'echarts/lib/chart/sankey'\n    import TrackJSON from '@/data/track'\n    // import { scaleLinear } from 'd3'\n\n\n    const DIM = ['age_range', 'xb','period','origin', 'tran', ]\n\n    const ITEM_STYLE = {\n        xb(){\n            return {\n                '男': {\n                    color: '#3a7ba5',\n                },\n                '女': {\n                    color: '#9d4da7',\n                },\n            }\n        }\n    }\n\n    const TRAN_ORDER = {\n        '私家/专车': 0,\n        '出租车': 1,\n        '3A109航船': 2,\n        '深圳湾口岸': 3,\n        '航空': 4,\n        '不明': 5,\n    }\n\n    const SORT_FUN = {\n        'age_range': data => {\n            return _.orderBy(data, d => {\n                switch(d.name) {\n                    case '婴幼儿/青少年(0~15)': return 0\n                    case '青年(16~30)': return 1\n                    case '中青年(30~45)': return 2\n                    case '中年(45~60)': return 3\n                    case '老年(>60)': return 4\n                }\n            })\n        },\n        'origin': data => {\n            return data.sort(a => COUNTRY.indexOf(a.name) !== -1 ? 1 : -1)\n        },\n        'tran': data => {\n            return _.orderBy(data, d => TRAN_ORDER[d.name])\n        },\n        'period': data => {\n            return _.orderBy(data, d => {\n                switch(d.name) {\n                    case '疫情初期(~1/23)': return 0\n                    case '发展期(1/23~2/6)': return 1\n                    case '国内二次传播期(2/6~2/20)': return 2\n                    case '国外输入期(2/20~)': return 3\n                }\n            })\n        }\n    }\n\n    const COUNTRY = [\"巴西\", \"法国\", \"柬埔寨\", \"澳门\", \"荷兰\",\n        \"菲律宾\", \"俄罗斯\", \"新加坡\", \"西班牙\", \"瑞士\", \"泰国\",\n        \"英国\", \"美国\"]\n\n    const getAgeCategory = age => {\n        if (age >= 0 && age <= 15) {\n            return '婴幼儿/青少年(0~15)'\n        }\n        if (age > 15 && age <= 30) {\n            return '青年(16~30)'\n        }\n        if (age > 30 && age <= 45) {\n            return '中青年(30~45)'\n        }\n        if (age > 45 && age <= 60) {\n            return '中年(45~60)'\n        }\n        if (age > 60) {\n            return '老年(>60)'\n        }\n    }\n\n    const ChinaPeriod = ['2020/1/23', '2020/2/6', '2020/2/20']\n        .map(d => new Date(d).getTime())\n\n    const getPeriod = date => {\n        const newDate = new Date(date).getTime()\n        if (newDate <= ChinaPeriod[0]) {\n            return '疫情初期(~1/23)'\n        }\n        if (newDate > ChinaPeriod[0] && newDate < ChinaPeriod[1]) {\n            return '发展期(1/23~2/6)'\n        }\n        if (newDate > ChinaPeriod[1] && newDate < ChinaPeriod[2]) {\n            return '国内二次传播期(2/6~2/20)'\n        }\n        if (newDate >= ChinaPeriod[2]) {\n            return '国外输入期(2/20~)'\n        }\n        \n    }\n\n    // const scale = scaleLinear()\n    //     .domain([1, 200])\n    //     .range(['#87cc7c', '#966d4b','#935740', '#69277e', '#9d4da7'])\n\n    export default {\n        name: 'SanKey',\n        methods: {\n            getNodes(data) {\n                return DIM.reduce((arr, key) => {\n                    const styles = ITEM_STYLE[key] && ITEM_STYLE[key]() || {}\n                    let tempArr =  _.chain(data)\n                        .map(d => {\n                            return {\n                                name: d[key],\n                                itemStyle: styles[d[key]],\n                            }\n                        })\n                        .uniqBy('name')\n                        .value()\n                        tempArr = SORT_FUN[key] ? SORT_FUN[key](tempArr) : tempArr\n                    return arr.concat(tempArr)\n                }, [])\n            },\n            getLinks(data) {\n                const links = [];\n                DIM.forEach((d, i, arr) => {\n                    if (i === arr.length - 1) return\n                    data.forEach(d1 => {\n                        const source = d1[d]\n                        const target = d1[arr[i + 1]]\n                        const value = data.filter(d2 => d2[d] === source\n                            && d2[arr[i + 1]] === target\n                            ).length\n                        links.push({\n                            source,\n                            target,\n                            value,\n                            lineStyle: {\n                                // color: scale(value),\n                            },\n                        })\n                    })\n                })\n\n                return _.uniqWith(links, _.isEqual)\n            },\n            initData() {\n                const data = _.chain(TrackJSON)\n                    // .slice(0, 400)\n                    .filter(d => d.track.length)\n                    .map(d => {\n                        const {track, nl} = d\n                        let tran = track.length ? track[track.length - 1].tran : ''\n                        tran = tran.indexOf('航班') !== -1 ? '航空' : tran\n                        tran = /(私家)|(自驾)|(专车)|(商务车)/.test(tran) ? '私家/专车' : tran\n                        tran = /(的士)|(出租车)/.test(tran) ? '出租车' : tran\n                        const age_range = getAgeCategory(+nl)\n                        return _.pick({\n                            ...d,\n                            tran: tran || '不明',\n                            age_range,\n                            period: getPeriod(d.track[d.track.length - 1].time)\n                        },\n                        DIM\n                        )\n                    })\n                    .value()\n                \n                const nodes = this.getNodes(data)\n                const links = this.getLinks(data)\n                return {nodes, links}\n            },\n            initChart() {\n                const { nodes, links } = this.initData()\n                \n                const option = {\n                    color: ['#87cc7c', '#966d4b', '#935740', '#69277e', '#9d4da7'],\n                    tooltip: {\n                        trigger: \"item\",\n                        triggerOn: \"mousemove\"\n                    },\n                    series: {\n                        type: \"sankey\",\n                        left: 10,\n                        right: 50,\n                        nodeGap: 1,\n                        layoutIterations: 0,\n                        data: nodes, // 节点\n                        links: links, // 节点之间的连线\n                        draggable: false,\n                        focusNodeAdjacency: \"allEdges\", // 鼠标划上时高亮的节点和连线，allEdges表示鼠标划到节点上点亮节点上的连线及连线对应的节点\n                        label: {\n                            fontSize: 10,\n                            color: \"rgba(255,255,255,.8)\"\n                        },\n                        lineStyle: {\n                            color: 'source',\n                            curveness: 0.5\n                        },\n                    }\n                };\n\n                const myChart = echarts.init(document.getElementById('sankey'), 'light');\n                myChart.setOption(option)\n            }\n        },\n        mounted() {\n            setTimeout(this.initChart);\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    #sankey{\n        height: 600px;\n    }\n</style>"],"sourceRoot":"src/page/ranking/components"}]}