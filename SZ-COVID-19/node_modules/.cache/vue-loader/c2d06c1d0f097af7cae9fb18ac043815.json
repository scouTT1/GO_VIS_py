{"remainingRequest":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/pc/components/scatter.vue?vue&type=style&index=0&id=4d96c4fa&lang=less&scoped=true&","dependencies":[{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/pc/components/scatter.vue","mtime":1617781888091},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/css-loader/dist/cjs.js","mtime":1617788566541},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1617788568833},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/postcss-loader/src/index.js","mtime":1617788568393},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/less-loader/dist/cjs.js","mtime":1617788599304},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js","mtime":1617788568833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zY2F0dGVyQ2hhcnR7CiAgICBoZWlnaHQ6IDQwcHg7CiAgICB3aWR0aDogMTAwJTsKfQo="},{"version":3,"sources":["scatter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA","file":"scatter.vue","sourceRoot":"src/page/pc/components","sourcesContent":["<template>\n    <div :id=\"id\" class=\"scatterChart\"></div>\n</template>\n\n<script>\n    import echarts from 'echarts/lib/echarts';\n    import _ from 'lodash';\n    import 'echarts/lib/chart/scatter'\n    import { scaleLinear } from 'd3'\n    \n    export default {\n        name: 'Scatter',\n        props: ['data', 'id', 'extent'],\n        methods: {\n            initMap() {\n                const useData = _.chain(this.data)\n                    .map(d => [d.time, d.addCount])\n                    .reverse()\n                    .chunk(3)\n                    .map(d => {\n                        return [`${d[0][0]}-${_.last(d)[0]}`, _.sumBy(d, d1 => d1[1])] \n                    })\n                    .value();\n\n                const scale = scaleLinear()\n                    .domain(this.extent)\n                    .range([2, 20])\n\n                const option = {\n                    singleAxis: {\n                        height: 0,\n                        left: 25,\n                        top: 20,\n                        type: 'category',\n                        boundaryGap: true,\n                        data: useData.map(d => d[0]),\n                        axisLabel: {\n                            show: false,\n                        },\n                        axisTick: {\n                            show: false,\n                        },\n                        splitLine: {\n                            show: false  \n                        },\n                        axisLine: {\n                            lineStyle: {\n                                 type: 'dotted',\n                                 color: 'gray'\n                            },\n                        }\n                    },\n                    tooltip: {\n                        confine: true,\n                        formatter: ({data}) => {\n                            return `${data[0]}<br />新增确诊人数：${data[1]}`\n                        },\n                        backgroundColor: 'rgba(32, 57, 112, .7)'\n                    },\n                    series: {\n                        singleAxisIndex: 0,\n                        coordinateSystem: 'singleAxis',\n                        type: 'scatter',\n                        data: useData,\n                        symbolSize:  function(dataItem) {\n                            return dataItem[1] ? scale(dataItem[1]) : 0\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: '#c23e32'\n                            }\n                        }\n                    }\n                };\n                const myChart = echarts.init(document.getElementById(this.id));\n                myChart.setOption(option);\n            }\n        },\n        mounted() {\n            setTimeout(this.initMap)\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .scatterChart{\n        height: 40px;\n        width: 100%;\n    }\n</style>"]}]}