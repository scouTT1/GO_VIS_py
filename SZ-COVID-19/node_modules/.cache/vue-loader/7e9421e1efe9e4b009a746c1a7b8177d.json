{"remainingRequest":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/comparison/components/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/comparison/components/list.vue","mtime":1617781942000},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/babel-loader/lib/index.js","mtime":1617788517170},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js","mtime":1617788568833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ2xvZGFzaCcKaW1wb3J0IFBhcnRKU09OIGZyb20gJ0AvZGF0YS9wYXJ0JwppbXBvcnQgU2NhdHRlciBmcm9tICcuL3NjYXR0ZXInCmltcG9ydCB7IGV4dGVudCB9IGZyb20gJ2QzJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0xpc3QnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkYXRhOiBbXSwKICAgICAgICAgICAgaGVpZ2h0OiAyMDAsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBpbml0RGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgbmFtZU9iaiA9IHsKICAgICAgICAgICAgICAgIG5zOiAn5Y2X5bGxJywKICAgICAgICAgICAgICAgIGdtOiAn5YWJ5piOJywKICAgICAgICAgICAgICAgIGRwOiAn5aSn6bmPJywKICAgICAgICAgICAgICAgIGZ0OiAn56aP55SwJywKICAgICAgICAgICAgICAgIGxnOiAn6b6Z5bKXJywKICAgICAgICAgICAgICAgIHl0OiAn55uQ55SwJywKICAgICAgICAgICAgICAgIGJhOiAn5a6d5a6JJywKICAgICAgICAgICAgICAgIHBzOiAn5Z2q5bGxJywKICAgICAgICAgICAgICAgIGxoX3U6ICfnvZfmuZYnLCAKICAgICAgICAgICAgICAgIGxoX3VhOiAn6b6Z5Y2OJywKICAgICAgICAgICAgICAgIHF0OiAn5YW25LuWJywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZmluYWwgPSBfLmNoYWluKG5hbWVPYmopCiAgICAgICAgICAgICAgICAua2V5cygpCiAgICAgICAgICAgICAgICAucmVkdWNlKChvYmosIGQpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhQXJyID0gUGFydEpTT04uZmlsdGVyKGQgPT4gZC5qenNqID09PSAnMjTml7YnKQogICAgICAgICAgICAgICAgICAgIC5tYXAoKGQxLCBpLCBhcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkQ291bnQgPSBpID09PSBhcnIubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBOdW1iZXIoZDFbZF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IE51bWJlcihkMVtkXSkgLSBOdW1iZXIoYXJyW2kgKyAxXVtkXSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogTnVtYmVyKGQxW2RdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IGQxLmp6cnEsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBvYmpbZF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVPYmpbZF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFBcnIsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkLAogICAgICAgICAgICAgICAgICAgICAgICBhY2M6IGRhdGFBcnJbMF0uY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdzogMCwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICAgIH0sIHt9KQogICAgICAgICAgICAgICAgLnZhbHVlcygpCiAgICAgICAgICAgICAgICAudmFsdWUoKTsKCiAgICAgICAgICAgIGNvbnN0IGRhdGFBcnIgPSBmaW5hbAogICAgICAgICAgICAgICAgLm1hcChkID0+IGQuZGF0YSkKICAgICAgICAgICAgICAgIC5mbGF0KCkKICAgICAgICAgICAgICAgIC5tYXAoZCA9PiBkLmFkZENvdW50KTsKICAgICAgICAgICAgXy5mb3JJbihmaW5hbCwgZCA9PiB7CiAgICAgICAgICAgICAgICBkLmNoYXJ0ID0gPFNjYXR0ZXIKICAgICAgICAgICAgICAgICAgICBkYXRhPXtkLmRhdGF9CiAgICAgICAgICAgICAgICAgICAgZXh0ZW50ID0ge2V4dGVudChkYXRhQXJyKX0KICAgICAgICAgICAgICAgICAgICBpZD17ZC5pZH0KICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmRhdGEgPSBmaW5hbAogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLiRyZWZzLmNvbnRhaW5lci5vZmZzZXRIZWlnaHQKICAgICAgICB9KQogICAgICAgIHRoaXMuaW5pdERhdGEoKQogICAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/page/comparison/components","sourcesContent":["<template>\n    <div class=\"table-container\" ref=\"container\">\n        <el-table\n            :data=\"data\"\n            :height=\"height\"\n        >\n            <el-table-column\n                prop=\"name\"\n                label=\"地区\"\n                min-width=\"15%\"\n            />\n            <el-table-column\n                prop=\"now\"\n                label=\"现有\"\n                min-width=\"15%\"\n            />\n            <el-table-column\n                prop=\"acc\"\n                label=\"累计\"\n                min-width=\"15%\"\n            />\n            <el-table-column\n                prop=\"chart\"\n                label=\"趋势\"\n                min-width=\"50%\"\n                class-name=\"scatter-chart\"\n            />\n        </el-table>\n    </div>\n    \n</template>\n\n<script>\n    import _ from 'lodash'\n    import PartJSON from '@/data/part'\n    import Scatter from './scatter'\n    import { extent } from 'd3'\n\n    export default {\n        name: 'List',\n        data() {\n            return {\n                data: [],\n                height: 200,\n            }\n        },\n        methods: {\n            initData() {\n                const nameObj = {\n                    ns: '南山',\n                    gm: '光明',\n                    dp: '大鹏',\n                    ft: '福田',\n                    lg: '龙岗',\n                    yt: '盐田',\n                    ba: '宝安',\n                    ps: '坪山',\n                    lh_u: '罗湖', \n                    lh_ua: '龙华',\n                    qt: '其他',\n                }\n\n                const final = _.chain(nameObj)\n                    .keys()\n                    .reduce((obj, d) => {\n                        const dataArr = PartJSON.filter(d => d.jzsj === '24时')\n                        .map((d1, i, arr) => {\n                            const addCount = i === arr.length - 1\n                                ? Number(d1[d])\n                                : Number(d1[d]) - Number(arr[i + 1][d]);\n\n                            return {\n                                addCount,\n                                count: Number(d1[d]),\n                                time: d1.jzrq,\n                            }\n                        });\n                        obj[d] = {\n                            name: nameObj[d],\n                            data: dataArr,\n                            id: d,\n                            acc: dataArr[0].count,\n                            now: 0,\n                        }\n                        return obj;\n                    }, {})\n                    .values()\n                    .value();\n\n                const dataArr = final\n                    .map(d => d.data)\n                    .flat()\n                    .map(d => d.addCount);\n                _.forIn(final, d => {\n                    d.chart = <Scatter\n                        data={d.data}\n                        extent = {extent(dataArr)}\n                        id={d.id}\n                    />\n                });\n                this.data = final\n            }\n        },\n        mounted() {\n            this.$nextTick(() => {\n                this.height = this.$refs.container.offsetHeight\n            })\n            this.initData()\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    .table-container{\n        height: 100%;\n    }\n    .el-table{\n        background-color: rgba(0, 0, 0, 0);\n        color: #869ea7 !important;\n        .el-table__body-wrapper {\n            // overflow: visible;\n        }\n        thead{\n            color: #97c9ef !important;\n        }\n        tr{\n            background-color: rgba(0, 0, 0, 0) !important;\n            th{\n                background-color: rgba(0, 0, 0, 0) !important;\n                border: none !important;\n            }\n            td{\n                border: none !important;\n            }\n            &:hover{\n                td{\n                    background-color: rgba(0, 0, 0, 0) !important;\n                }\n                \n            }\n        }\n        &::before{\n            content: none;\n        }\n        .scatter-chart {\n            .cell {\n                width: 100%;\n                overflow: visible;\n            }\n        }\n    }\n</style>"]}]}