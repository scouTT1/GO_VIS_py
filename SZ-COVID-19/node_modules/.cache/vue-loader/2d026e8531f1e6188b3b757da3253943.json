{"remainingRequest":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/comparison/components/heatmap.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/comparison/components/heatmap.vue","mtime":1619090630954},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/css-loader/dist/cjs.js","mtime":1617788566541},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1617788568833},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/postcss-loader/src/index.js","mtime":1617788568393},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/less-loader/dist/cjs.js","mtime":1617788599304},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js","mtime":1617788568833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWF0bWFwewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICAuYnRuewogICAgICAgIGZsb2F0OiByaWdodDsKICAgICAgICAuZWwtZHJvcGRvd24gewogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogICAgICAgIH0KICAgICAgICAuZWwtZHJvcGRvd24gKyAuZWwtZHJvcGRvd24gewogICAgICAgICAgICBtYXJnaW4tbGVmdDogMTVweDsKICAgICAgICB9CiAgICAgICAgLmVsLWljb24tYXJyb3ctZG93biB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CiAgICB9CiAgICAubWFwX3Jvd3sKICAgICAgICB3aWR0aDogODAlOwogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsKICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgLnNtYWxsX2JveF9yb3d7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgfQogICAgfQogICAgLm1hcF9jb2x7CiAgICAgICAgaGVpZ2h0OiA4MCU7CiAgICAgICAgd2lkdGg6IDUlOwogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAuc21hbGxfYm94X2NvbHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICB3cml0aW5nLW1vZGU6IHZlcnRpY2FsLWxyOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["heatmap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"heatmap.vue","sourceRoot":"src/page/comparison/components","sourcesContent":["<template>\n    <div class=\"heatmap\">\n        <el-dropdown class=\"btn\">\n            <el-button type=\"primary\" size=\"mini\">\n                增<i class=\"el-icon-arrow-down el-icon--right\"></i>\n            </el-button>\n            <template #dropdown>\n                <el-dropdown-menu>\n                    <el-dropdown-item \n                        v-for=\"(item, index) in player_other\"\n                        @click.native=\"handleClick(item,index)\">{{item.name_zh}}\n                    </el-dropdown-item>\n                </el-dropdown-menu>\n            </template>\n        </el-dropdown>\n        <div id=\"chart\"></div>\n        <!--<div class=\"map_row\">\n            <el-tag class=\"small_box_row\" \n                closable\n                v-for=\"(item,index) in player_label\"\n                @close=\"handleChange(item,index)\">{{ item.name_zh }}\n            </el-tag>\n        </div>\n        <div class=\"map_col\">\n            <el-tag class=\"small_box_col\" \n                closable\n                v-for=\"(item,index) in player_label\"\n                @close=\"handleChange(item,index)\">{{ item.name_zh }}\n            </el-tag>\n        </div>-->\n    </div>\n</template>\n\n<script>\n    import * as echarts from 'echarts';\n    import 'echarts/extension/bmap/bmap'\n    import PlayerData from '@/data/player'\n    export default {\n        name: 'heatmap',\n        components: {},\n        data() {\n            return {\n                playerdata: [],\n                default_num: 3,\n                player_label: [],\n                player_other: [],\n                days:[],\n                hours:[],\n                data:[],\n                num_max: 1,\n            }\n        },\n        mounted() {\n            //console.log(\"123\");\n            this.initData();\n        },\n        methods: {\n            computeWinData(player1,player2){\n                var name2=player2.name_zh;\n                var num_win=0;\n                var num_lose=0;\n                for (var i = 0; i < player1.match_list.length; i++){\n                    if(player1.match_list[i].opponent_name==name2){\n                        if (player1.match_list[i].my_result==\"负\"){\n                            num_lose++;\n                        }else if(player1.match_list[i].my_result==\"胜\"){\n                            num_win++;\n                        }\n                    }\n                }\n                return num_win-num_lose;\n            },\n            generateData(){\n                this.data=[];\n                this.days=[];\n                this.hours=[];\n                for (var i = 0; i<this.player_label.length; i++){\n                    this.days.push(this.player_label[i].name_zh);\n                    this.hours.push(this.player_label[i].name_zh);\n                }\n                for (var i = 0; i < this.player_label.length; i++){\n                    for (var j = 0; j < this.player_label.length; j++){\n                        if (i==j){\n                            this.data.push([i,j,0]);\n                        }else{\n                            var temp=this.computeWinData(this.player_label[i],this.player_label[j]);\n                            this.data.push([i,j,temp]);\n                            if (temp>this.num_max){\n                                this.num_max=temp;\n                            }\n                        }\n                    }\n                }\n            },\n            draw(){\n                var chartDom = document.getElementById('chart');\n                var option;\n                this.generateData();\n                var chart_data = this.data.map(function (item) {\n                    return [item[1], item[0], item[2] || '-'];\n                });\n\n                option = {\n                    tooltip: {\n                        position: 'top'\n                    },\n                    grid: {\n                        height: '60%',\n                        width: '80%',\n                        top: '12%'\n                    },\n                    xAxis: {\n                        type: 'category',\n                        position: 'top',\n                        data: this.hours,\n                        splitArea: {\n                            show: true\n                        },\n                        axisLabel: {\n                            show: true,\n                            textStyle: {\n                                color: '#c3dbff',  //更改坐标轴文字颜色\n                                fontSize : 14,      //更改坐标轴文字大小\n                            },\n                            interval: 0,\n                            rotate:-45,//倾斜度 -90 至 90 默认为0\n                            margin:8\n                        },\n                        triggerEvent: true\n                    },\n                    yAxis: {\n                        type: 'category',\n                        data: this.days,\n                        inverse: true,\n                        splitArea: {\n                            show: true\n                        },\n                        axisLabel: {\n                            show: true,\n                            textStyle: {\n                                color: '#c3dbff',  //更改坐标轴文字颜色\n                                fontSize : 14      //更改坐标轴文字大小\n                            }\n                        },\n                        triggerEvent: true\n                    },\n                    visualMap: {\n                        min: -1*this.num_max,\n                        max: this.num_max,\n                        calculable: true,\n                        orient: 'horizontal',\n                        left: 'center',\n                        bottom: '15%'\n                    },\n                    series: [{\n                        name: 'Punch Card',\n                        type: 'heatmap',\n                        data: chart_data,\n                        label: {\n                            show: true\n                        },\n                        emphasis: {\n                            itemStyle: {\n                                shadowBlur: 10,\n                                shadowColor: 'rgba(0, 0, 0, 0.5)'\n                            }\n                        }\n                    }]\n                };\n                this.myChart = echarts.init(chartDom);\n                this.myChart.setOption(option);\n\n            },\n            initData() {\n                this.playerdata=PlayerData;\n                for (var i=0; i<this.playerdata.length; i++){\n                    if(i<this.default_num){\n                        this.player_label.push(this.playerdata[i]);\n                    }else{\n                        this.player_other.push(this.playerdata[i]);\n                    }\n                };\n                this.draw();\n                var temp_label=this.player_label;\n                var temp_other=this.player_other;\n                var flag=false;\n                var myChart=this.myChart;\n                var name=this.myChart.on('click',function(params){\n                    this.$emit('click')\n                    var result=confirm(\"确认从图中删除\"+params.value+\"?\");\n                    if (result){\n                        for (var i=0; i<temp_label.length; i++){\n                            if (temp_label[i].name_zh==params.value){\n                                flag=true;\n                                alert(flag);\n                                console.log(temp_label);\n                                console.log(temp_other);\n                                console.log(\"###############\");\n                                temp_other.push(temp_label[i]);  //添加到备选框中\n                                temp_label.splice(i,1);\n                                console.log(temp_label);\n                                console.log(temp_other);\n                                break;\n                            }\n                        }\n                        \n                    }\n                    console.log(params.value,name);\n                    return params.value;\n                });\n                console.log(name);\n                this.draw();\n            },\n            handleClick(item,index) {\n                this.player_label.push(item);\n                this.player_other.splice(index,1);\n                this.draw();\n            }\n        },\n};\n</script>\n\n<style lang=\"less\">\n    .heatmap{\n        width: 100%;\n        height: 100%;\n        .btn{\n            float: right;\n            .el-dropdown {\n                vertical-align: top;\n            }\n            .el-dropdown + .el-dropdown {\n                margin-left: 15px;\n            }\n            .el-icon-arrow-down {\n                font-size: 12px;\n            }\n        }\n        .map_row{\n            width: 80%;\n            display: flex;\n            flex-direction: row;\n            text-align: center;\n            .small_box_row{\n                width: 100%;\n                height: 100%;\n            }\n        }\n        .map_col{\n            height: 80%;\n            width: 5%;\n            display: flex;\n            flex-direction: column;\n            .small_box_col{\n                width: 100%;\n                height: 100%;\n                text-align: center;\n                writing-mode: vertical-lr;\n            }\n        }\n    }\n</style>"]}]}