{"remainingRequest":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/ranking/components/searchList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/src/page/ranking/components/searchList.vue","mtime":1619072133773},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/babel-loader/lib/index.js","mtime":1617788517170},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/cache-loader/dist/cjs.js","mtime":1617788517390},{"path":"/home/yujiahao/Downloads/visual_work/SZ-COVID-19/node_modules/vue-loader/lib/index.js","mtime":1617788568833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBldmVudEJ1cyBmcm9tICcuLi9ldmVudEJ1cycKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJwppbXBvcnQgcGljdHVyZSBmcm9tICdAL2Fzc2V0cy9ib3JkZXIucG5nJwppbXBvcnQgVHJhY2tKU09OIGZyb20gJ0AvZGF0YS90cmFjaycKaW1wb3J0IFBsYXllckRhdGEgZnJvbSAnQC9kYXRhL3BsYXllcicKLy9pbXBvcnQgeyBTd2lwZXIsIFN3aXBlclNsaWRlIH0gZnJvbSAndnVlLWF3ZXNvbWUtc3dpcGVyJwovL2ltcG9ydCAnc3dpcGVyL2Nzcy9zd2lwZXIuY3NzJwoKZXhwb3J0IGRlZmF1bHQgewoKICAgIG5hbWU6ICdzZWFyY2gtbGlzdCcsCiAgICBjb21wb25lbnRzOiB7CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0YWJsZURhdGE6W10sCiAgICAgICAgICAgIGFjdGl2ZTogLTEsCiAgICAgICAgICAgIGNoZWNrYm94R3JvdXA6IFsn55S3Jywn5aWzJ10sCiAgICAgICAgICAgIHNleF9tYWxlOiBbJ+eUtyddLAogICAgICAgICAgICBzZXhfZmVtYWxlOiBbJ+WlsyddLAogICAgICAgICAgICBtYWxlOiB0cnVlLAogICAgICAgICAgICBmZW1hbGU6IHRydWUsCiAgICAgICAgICAgIHN3aXBlck9wdGlvbjogewogICAgICAgICAgICAgICAgZGlyZWN0aW9uIDogJ3ZlcnRpY2FsJywKICAgICAgICAgICAgICAgIGF1dG9wbGF5OiB7CiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDEwMDAsCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsCiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLAogICAgICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSwKICAgICAgICAgICAgICAgIGhlaWdodDogNDAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICBzdHlsZXM6IHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgke3BpY3R1cmV9KWAsCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGlzdEFycjogW10sCiAgICAgICAgICAgIGN1cnJlbnREYXRlOiAnJywKICAgICAgICAgICAgdHJhbnNBcnI6IFtdLAogICAgICAgICAgICB0cmFuc09iajoge30sCiAgICAgICAgICAgIGlkQWRkOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGluaXREYXRhKCkgewogICAgICAgICAgICB0aGlzLnBsYXllckRhdGE9UGxheWVyRGF0YQogICAgICAgICAgICB0aGlzLmluaXRUcmFja0RhdGEgPSBUcmFja0pTT04KICAgICAgICAgICAgICAgIC5maWx0ZXIoZCA9PiBkLnRyYWNrLmxlbmd0aCkKICAgICAgICAgICAgICAgIC5tYXAoZCA9PiAoewogICAgICAgICAgICAgICAgICAgIC4uLmQsCiAgICAgICAgICAgICAgICAgICAgcGxhY2U6IF8uY2hhaW4oZC50cmFjaykKICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFyciwgZDEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkMS5mcm9tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGQudHJhY2tbZC50cmFjay5sZW5ndGggLSAxXS50aW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKGQudHJhY2tbZC50cmFjay5sZW5ndGggLSAxXS50aW1lKS5nZXRUaW1lKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycgogICAgICAgICAgICAgICAgICAgICAgICB9LCBbXSkKICAgICAgICAgICAgICAgICAgICAgICAgLnVuaXFCeSgnbmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgIC52YWx1ZSgpCiAgICAgICAgICAgIH0pKQoKICAgICAgICAgICAgdGhpcy5vcmlnaW5MaXN0QXJyID0gXy5jaGFpbih0aGlzLmluaXRUcmFja0RhdGEpCiAgICAgICAgICAgICAgICAubWFwKGQgPT4gZC50cmFjay5tYXAoZDEgPT4gW2QxLmZyb20sIGQxLnRvXSkpCiAgICAgICAgICAgICAgICAuZmxhdHRlbkRlZXAoKQogICAgICAgICAgICAgICAgLnVuaXEoKQogICAgICAgICAgICAgICAgLmNvbXBhY3QoKQogICAgICAgICAgICAgICAgLm1hcChkID0+ICh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogZCwKICAgICAgICAgICAgICAgICAgICBjb3VudDogMCwKICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgLmZpbHRlcihkID0+IGQubmFtZSAhPT0gJ+a3seWcsycpCiAgICAgICAgICAgICAgICAudmFsdWUoKQoKICAgICAgICAgICAgdGhpcy5hbGxDb3VudE9iaiA9IF8uY2hhaW4odGhpcy5pbml0VHJhY2tEYXRhKQogICAgICAgICAgICAgICAgLm1hcCgncGxhY2UnKQogICAgICAgICAgICAgICAgLmZsYXR0ZW4oKQogICAgICAgICAgICAgICAgLm1hcCgnbmFtZScpCiAgICAgICAgICAgICAgICAuY291bnRCeSgpCiAgICAgICAgICAgICAgICAudmFsdWUoKQoKICAgICAgICAgICAgdGhpcy5wbGFjZUFyciA9IF8uY2hhaW4odGhpcy5pbml0VHJhY2tEYXRhKQogICAgICAgICAgICAgICAgLm1hcCgncGxhY2UnKQogICAgICAgICAgICAgICAgLmZsYXR0ZW4oKQogICAgICAgICAgICAgICAgLnZhbHVlKCkKCiAgICAgICAgICAgIHRoaXMuc3RhcnRTZWFyY2goKQogICAgICAgIH0sCiAgICAgICAgc3RhcnRTZWFyY2goZGF0ZSA9ICcnKSB7CiAgICAgICAgICAgIHRoaXMubGlzdEFyciA9IF8uY2hhaW4odGhpcy5vcmlnaW5MaXN0QXJyKQogICAgICAgICAgICAgICAgLm1hcChkID0+ICh7CiAgICAgICAgICAgICAgICAgICAgLi4uZCwKICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5nZXRDb3VudChkLm5hbWUsIGRhdGUpCiAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgIC5maWx0ZXIoZCA9PiBkLmNvdW50KQogICAgICAgICAgICAgICAgLm9yZGVyQnkoJ2NvdW50JywgJ2Rlc2MnKQogICAgICAgICAgICAgICAgLnZhbHVlKCkKCiAgICAgICAgICAgIHZhciB0ZW1wX2xpc3Q7CiAgICAgICAgICAgIGlmKHRoaXMubWFsZSAmJiAhdGhpcy5mZW1hbGUpewogICAgICAgICAgICAgICAgdGVtcF9saXN0PVsn4pmCJ107CiAgICAgICAgICAgIH1lbHNlIGlmKCF0aGlzLm1hbGUgJiYgdGhpcy5mZW1hbGUpewogICAgICAgICAgICAgICAgdGVtcF9saXN0PVsn4pmAJ107CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGVtcF9saXN0PVsn4pmCJywn4pmAJ107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5saXN0QXJyPV8uY2hhaW4odGhpcy5wbGF5ZXJEYXRhKS5tYXAoZCA9PiAoewogICAgICAgICAgICAgICAgLi4uZCwKICAgICAgICAgICAgICAgIG5hbWU6IGQubmFtZV96aCwKICAgICAgICAgICAgICAgIGNvdW50cnk6IGQuY291bnRyeSwKICAgICAgICAgICAgICAgIGNvdW50OiBkLnNjb3JlX25ldwogICAgICAgICAgICB9KSkuZmlsdGVyKGQgPT4gZC5jb3VudCkuZmlsdGVyKGQgPT4gdGVtcF9saXN0LmluZGV4T2YoZC5zZXgpIT0tMSkKICAgICAgICAgICAgLm9yZGVyQnkoJ2NvdW50JywnZGVzYycpCiAgICAgICAgICAgIC52YWx1ZSgpOwogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIGdldENvdW50KG5hbWUsIGRhdGUpIHsKICAgICAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gdGhpcy5hbGxDb3VudE9ialtuYW1lXSB8fCAwCiAgICAgICAgICAgIGNvbnN0IHRpbWVTdGFtcCA9IG5ldyBEYXRlKGRhdGUpLmdldFRpbWUoKQogICAgICAgICAgICByZXR1cm4gdGhpcy5wbGFjZUFycgogICAgICAgICAgICAgICAgLmZpbHRlcihkID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEZsYWcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWRkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBGbGFnID0gZC50aW1lIDw9IHRpbWVTdGFtcAogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBGbGFnID0gZC5kYXRlID09PSBkYXRlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wRmxhZyAmJiBkLm5hbWUgPT09IG5hbWV9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAubGVuZ3RoCiAgICAgICAgfSwKICAgICAgICB3YXRjaFRpbWUoKSB7CiAgICAgICAgICAgIGV2ZW50QnVzLiRvbigndHJhY2tNYXBUaW1lJywgKHtkYXRlLCBpc0FkZH0pID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuaXNBZGQgPSBpc0FkZAogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IGRhdGUKICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRTZWFyY2goZGF0ZSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGhhbmRsZUNoYW5nZU1hbGUoKSB7CiAgICAgICAgICAgIHRoaXMubWFsZT0hdGhpcy5tYWxlOwogICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDaGFuZ2VGZW1hbGUoKSB7CiAgICAgICAgICAgIHRoaXMuZmVtYWxlPSF0aGlzLmZlbWFsZTsKICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpOwogICAgICAgIH0sCiAgICAgICAgbW91c2VPdmVyKGl0ZW0saW5kZXgpewogICAgICAgICAgICAvL3RoaXMuYWN0aXZlW2luZGV4XT0nYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZic7CiAgICAgICAgICAgIHRoaXMuYWN0aXZlPWluZGV4OwogICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgnc2VsZWN0UGxheWVySW5mbycsewogICAgICAgICAgICAgICAgcGxheWVySW5mbzogaXRlbQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG1vdXNlTGVhdmUoaXRlbSxpbmRleCl7CiAgICAgICAgICAgIC8vdGhpcy5hY3RpdmVbaW5kZXhdPSdiYWNrZ3JvdW5kLWNvbG9yOiAjMDkxNDFEJzsKICAgICAgICAgICAgdGhpcy5hY3RpdmU9LTE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0saW5kZXgpOwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuaW5pdERhdGEoKQogICAgfSwKfQo="},{"version":3,"sources":["searchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"searchList.vue","sourceRoot":"src/page/ranking/components","sourcesContent":["<template>\n    <div class=\"search-list\">\n        <div class=\"search-lists\">\n            <header class=\"lists-header\">\n                <span>个人等级分排名</span>\n                <el-checkbox-group v-model=\"checkboxGroup\" size=\"mini\">\n                    <el-checkbox-button\n                        v-model=\"male\"\n                        v-for=\"sex in sex_male\"\n                        :label=\"sex\"\n                        :key=\"sex\"\n                        @change=\"handleChangeMale\">\n                            {{sex}}\n                    </el-checkbox-button>\n                    <el-checkbox-button\n                        v-model=\"female\"\n                        v-for=\"sex in sex_female\"\n                        :label=\"sex\"\n                        :key=\"sex\"\n                        @change=\"handleChangeFemale\">\n                            {{sex}}\n                    </el-checkbox-button>\n                </el-checkbox-group>\n            </header>\n            <ul >\n                <li\n                    v-for=\"(item,index) in listArr\"\n                    :key=\"item.name\"\n                    :class=\"{smart_index :active==index}\"\n                    @mouseover=\"mouseOver(item,index)\"\n                    @mouseleave=\"mouseLeave(item,index)\"\n                >\n                    <div>{{item.name}}</div>\n                    <div>{{item.country}}</div>\n                    <div>{{item.count}}</div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\nimport eventBus from '../eventBus'\nimport _ from 'lodash'\nimport picture from '@/assets/border.png'\nimport TrackJSON from '@/data/track'\nimport PlayerData from '@/data/player'\n//import { Swiper, SwiperSlide } from 'vue-awesome-swiper'\n//import 'swiper/css/swiper.css'\n\nexport default {\n\n    name: 'search-list',\n    components: {\n    },\n    data() {\n        return {\n            tableData:[],\n            active: -1,\n            checkboxGroup: ['男','女'],\n            sex_male: ['男'],\n            sex_female: ['女'],\n            male: true,\n            female: true,\n            swiperOption: {\n                direction : 'vertical',\n                autoplay: {\n                    delay: 1000,\n                    disableOnInteraction: false,\n                },\n                loop: true,\n                slidesPerView: 3,\n                mousewheel: true,\n                height: 400,\n            },\n            styles: {\n                backgroundImage: `url(${picture})`,\n                backgroundRepeat: 'no-repeat',\n            },\n            listArr: [],\n            currentDate: '',\n            transArr: [],\n            transObj: {},\n            idAdd: false,\n        }\n    },\n    methods: {\n        initData() {\n            this.playerData=PlayerData\n            this.initTrackData = TrackJSON\n                .filter(d => d.track.length)\n                .map(d => ({\n                    ...d,\n                    place: _.chain(d.track)\n                        .slice(0, 1)\n                        .reduce((arr, d1) => {\n                            arr.push({\n                                name: d1.from,\n                                date: d.track[d.track.length - 1].time,\n                                time: new Date(d.track[d.track.length - 1].time).getTime(),\n                            })\n                            return arr\n                        }, [])\n                        .uniqBy('name')\n                        .value()\n            }))\n\n            this.originListArr = _.chain(this.initTrackData)\n                .map(d => d.track.map(d1 => [d1.from, d1.to]))\n                .flattenDeep()\n                .uniq()\n                .compact()\n                .map(d => ({\n                    name: d,\n                    count: 0,\n                }))\n                .filter(d => d.name !== '深圳')\n                .value()\n\n            this.allCountObj = _.chain(this.initTrackData)\n                .map('place')\n                .flatten()\n                .map('name')\n                .countBy()\n                .value()\n\n            this.placeArr = _.chain(this.initTrackData)\n                .map('place')\n                .flatten()\n                .value()\n\n            this.startSearch()\n        },\n        startSearch(date = '') {\n            this.listArr = _.chain(this.originListArr)\n                .map(d => ({\n                    ...d,\n                    count: this.getCount(d.name, date)\n                }))\n                .filter(d => d.count)\n                .orderBy('count', 'desc')\n                .value()\n\n            var temp_list;\n            if(this.male && !this.female){\n                temp_list=['♂'];\n            }else if(!this.male && this.female){\n                temp_list=['♀'];\n            }else{\n                temp_list=['♂','♀'];\n            }\n            this.listArr=_.chain(this.playerData).map(d => ({\n                ...d,\n                name: d.name_zh,\n                country: d.country,\n                count: d.score_new\n            })).filter(d => d.count).filter(d => temp_list.indexOf(d.sex)!=-1)\n            .orderBy('count','desc')\n            .value();\n            \n        },\n        getCount(name, date) {\n            if (!date) return this.allCountObj[name] || 0\n            const timeStamp = new Date(date).getTime()\n            return this.placeArr\n                .filter(d => {\n                    let tempFlag = false\n                    if (this.isAdd) {\n                        tempFlag = d.time <= timeStamp\n                    } else {\n                        tempFlag = d.date === date\n                    }\n                    return tempFlag && d.name === name}\n                )\n                .length\n        },\n        watchTime() {\n            eventBus.$on('trackMapTime', ({date, isAdd}) => {\n                this.isAdd = isAdd\n                this.currentDate = date\n                this.startSearch(date)\n            })\n        },\n        handleChangeMale() {\n            this.male=!this.male;\n            this.initData();\n        },\n        handleChangeFemale() {\n            this.female=!this.female;\n            this.initData();\n        },\n        mouseOver(item,index){\n            //this.active[index]='background-color: #ffffff';\n            this.active=index;\n            eventBus.$emit('selectPlayerInfo',{\n                playerInfo: item\n            });\n        },\n        mouseLeave(item,index){\n            //this.active[index]='background-color: #09141D';\n            this.active=-1;\n            console.log(item,index);\n        }\n    },\n    mounted() {\n        this.initData()\n    },\n}\n</script>\n\n<style lang=\"less\">\n    .search-list {\n        margin-left: 20px;\n        width: calc(100% - 20px);\n        display: flex;\n        flex-direction: column;\n        .search-lists {\n            margin-top: 20px;\n            margin-bottom: 20px;\n            height: calc(100% - 20px);\n            overflow: auto;\n            .lists-header {\n                display: flex;\n                justify-content: space-between;\n                font-size: 14px;\n            }\n            ul {\n                padding-left: 0;\n                color: #aaa;\n                list-style-type: none;\n                font-size: 14px;\n                li {\n                    display: flex;\n                    justify-content: space-between;\n                    border-bottom: 1px dotted #224ac0;\n                    line-height: 2.5em;\n                    span:nth-last-child(1) {\n                        margin-right: 10px;\n                    }\n                }\n            }\n        }\n    }\n    .smart_index{\n        background-color: #fff;\n    }\n</style>"]}]}